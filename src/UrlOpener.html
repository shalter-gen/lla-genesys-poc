<!DOCTYPE html>
<html>

<head>
	<title>Open Page</title>
	<style>
		#open-page-btn {
			padding: 5px 10px;
			font-size: 16px;
			cursor: pointer;
			appearance: button;
			background-color: rgb(86, 170, 198);
			background-image: none;
			border: 1.11111px solid rgb(67, 160, 192);
			border-radius: 4px;
			box-sizing: border-box;
			color: rgb(255, 255, 255);
			display: inline-block;
			font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
			font-feature-settings: "tnum";
			font-weight: 400;
			line-height: 21.3333px;
			margin: 0;
			min-height: 36px;
			text-align: center;
			text-transform: none;
			vertical-align: middle;
			white-space: nowrap;
			-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
			-webkit-border-image: none;
			width: fit-content;
			/* added this line */
		}
	</style>
</head>

<body>
	<button id="open-page-btn">Open Page</button>

	<script>
		const url = new URL(window.location.href);
		const targetUrl = url.searchParams.get('url');
		const buttonLabel = url.searchParams.get('ButtonLabel') || 'Open Page';
		const autoClick = url.searchParams.has('autoclick');

		let openedWindow;
		// document.getElementById('open-page-btn').textContent = buttonLabel;
		// document.getElementById('open-page-btn').addEventListener('click', () => {
		// 	if (!openedWindow || openedWindow.closed) {
		// 		openedWindow = window.open(targetUrl, '_blank');
		// 	} else {
		// 		openedWindow.location = targetUrl; 
		// 		openedWindow.focus();
		// 	}
		// });

		const button = document.getElementById('open-page-btn');
		button.textContent = buttonLabel;

		function openTargetPage() {
			if (!openedWindow || openedWindow.closed) {
				openedWindow = window.open(targetUrl, '_blank');
			} else {
				openedWindow.location = targetUrl;
				openedWindow.focus();
			}
		}
		button.addEventListener('click', openTargetPage);

		// Automatically click the button if 'autoclick' parameter is present
		if (autoClick) {
			button.click();
			// openTargetPage();
			// run following after timeout of 1s
			// setTimeout(() => {
			// 	window.close();
			// }, 1000);
		}


	</script>

	<script type="text/javascript" charset="utf-8">
		(function (g, e, n, es, ys) {
			g['_genesysJs'] = e;
			g[e] = g[e] || function () {
				(g[e].q = g[e].q || []).push(arguments)
			};
			g[e].t = 1 * new Date();
			g[e].c = es;
			ys = document.createElement('script'); ys.async = 1; ys.src = n; ys.charset = 'utf-8'; document.head.appendChild(ys);
		})(window, 'Genesys', 'https://apps.mypurecloud.com.au/genesys-bootstrap/genesys.min.js', {
			environment: 'prod-apse2',
			deploymentId: 'c1505209-b3f1-4092-8c61-41516695ba2e'
		});
	</script>
</body>

</html>